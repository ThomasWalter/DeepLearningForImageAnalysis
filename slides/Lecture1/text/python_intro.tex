%% \documentclass{beamer}


%% \mode<article> % only for the article version
%% {
%%   \usepackage{fullpage}
%%   \usepackage{hyperref}
%% }


%% \mode<presentation>
%% {
%% 	%\setbeamertemplate{background canvas}[vertical shading][bottom=red!10,top=blue!10]

%% 	\usetheme{Warsaw}

%% 	\setbeamertemplate{footline}[frame number]
%% 	\setbeamertemplate{navigation symbols}{}

%% 	\usefonttheme[onlysmall]{structurebold}


%% 	%\usepackage{multimedia}
%% }

%% %\usepackage[latin1]{inputenc}


%% \usepackage[T1]{fontenc}
%% \usepackage{lmodern}

%% \usepackage{amsmath}
%% \usepackage{amsfonts}
%% \usepackage{amssymb}

%% \usepackage{graphicx}
%% %\usepackage[french]{babel}
%% %\NoFrenchBabelItemize
%% %\usepackage{pstricks,pst-node,pst-tree}
%% %\usepackage{subfigure}
%% %\usepackage{color}
%% %\usepackage{colortbl}

%% %\usepackage{pgf,pgfarrows,pgfnodes,pgfautomata,pgfheaps,pgfshade}

%% %\usepackage{ifthen}


%% \setbeamercovered{dynamic}


\documentclass[xcolor=pdftex,dvipsnames,table,mathserif]{beamer}
\input{../../setting.tex}
\usepackage{physics}
\usepackage{alltt}

\graphicspath{{../graphics/}}

\AtBeginSection[]{
  \begin{frame}{Contents}
    \tableofcontents[currentsection, hideothersubsections]
  \end{frame}
}

\AtBeginSubsection[]{
  \begin{frame}{Contents}
    \tableofcontents[currentsection, subsectionstyle=show/shaded/hide]
  \end{frame}
}

\setbeamertemplate{footline}[frame number]{}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{section in toc}[square]
\setbeamertemplate{items}[square]

\title{Python and numpy primer}
\author{}
\date{MINES ParisTech\\
  PSL Research University\\
  Center for Mathematical Morphology
}
\titlegraphic{\includegraphics[height=1.7cm]{../graphics/logoemp}}

\useinnertheme{rounded}
\usecolortheme{rose}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section*{Introduction}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Practical sessions tools}

\begin{itemize}
\item Python: a high level interpreted language
\item Numpy: a scientific computing libray
\item Keras: a high level deep learning library
\item Jupyter notebook: A web application allowing to run code in a user-friendly environment
\end{itemize}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Python in 5 minutes}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Python}

  \begin{block}{Python}
    \begin{itemize}
    \item High-level language
    \item Object-oriented with dynamic typing
    \item Easy to interface with C++
    \item Easy to learn (?)
    \end{itemize}
  \end{block}

\begin{alertblock}{}
  We will use Python 3
\end{alertblock}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Expressions, variables and types}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Expressions}

  A session in the interactive interpreter:
  \begin{block}{Examples of expressions}

    \begin{alltt}
      $>>>$ 2

      2

      $>>>$ 2+2

      4

      $>>>$ "hello"

      'hello'

      $>>>$ \# this is a comment
    \end{alltt}
  \end{block}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Variables}

    Variables are not declared:

    \begin{block}{}
    \begin{alltt}
      $>>>$ a = 2

      $>>>$ a

      2

      $>>>$ b = 3

      $>>>$ print(b)

      3

      $>>>$ b = a

      $>>>$ a = 1

      $>>>$ print(a,b)

      1 2
    \end{alltt}
  \end{block}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Compound types: tuples and lists}

  \begin{block}{Tuples}
    \begin{alltt}
      $>>>$ t1 = ( 1, "zz")

      $>>>$ type(t1)

      <type 'tuple'>

      $>>>$ print(t1, t1[0], t1[1])

      (1,"zz") 1 "zz"

      $>>>$ a,b = t1

      $>>>$ print(a)

      1

      $>>>$ print(b)

      'zz'
    \end{alltt}
  \end{block}

  \begin{alertblock}{Tuples are inmutable}
    Once they are created, the can only be erased. They cannot be modified.
  \end{alertblock}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Compound types: tuples and lists}

  \begin{block}{Lists}
    \begin{alltt}
      $>>>$ l1=[ "abc" ]

      $>>>$ l1.append(3.14159) \# lists can be heterogeneous
      $>>>$ l1
      [ 'abc', 3.14159 ]

      $>>>$ l1.append( [ 1, t1 ] ) \# lists can contain lists
      $>>>$ l1
      ['abc', 3.14159, [1, (1, 2)]]

      $>>>$ print(l1[1]) \# indexing starts at 0

      3.14159
    \end{alltt}
  \end{block}

\begin{alertblock}{Lists are mutable}
  New elements can  be added; existing elements can be modified of deleted.
\end{alertblock}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Functions}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Functions (1)}

  \begin{block}{Declaring a function}
    \begin{alltt}
      def f(a):        \# note the ':' (colon)

      ~~~~ return a*2   \# there are 4 spaces or 1 tab

      ~~~~ ~~~~ ~~~~ ~\#     before the "return"
    \end{alltt}
  \end{block}

  Indentation is \emph{critical}: it's part of the syntax.


  \begin{block}{Execution}
    \begin{alltt}

      $>>>$ f("abcd")

      'abcdabcd'

    \end{alltt}
  \end{block}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Functions (2)}
  \begin{block}{Return value}

    \begin{alltt}
      def theAddition(a, b):

      ~~~~ return a + b
    \end{alltt}

  \end{block}
\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Classes}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{A Python class}

  A class in Python (as in many other object-oriented languages) is a container that can hold:
  \begin{itemize}
  \item Attributes (internal variables) and
  \item Methods (internal functions).
  \end{itemize}

  A class is defined using the \emph{class} keyword.
  \begin{block}{Example}
    \begin{alltt}
      class Bird:

      ~~~~ def set\_name(self, given\_name):  \# class method

      ~~~~ ~~~~ self.name = given\_name  \# instance attribute
    \end{alltt}
  \end{block}

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Class instance}

  The execution of the above code creates a class. It can be instantiated by calling it as a function:

  \begin{block}{}
    \begin{alltt}
    >>> robin = Bird()

    >>> robin.set\_name(``European robin'')
    \end{alltt}
  \end{block}

  The result is an object or instance built according to the class model. The keyword \emph{self} represents the class instance.

  Instance attributes should in fact be initialized in a special method, that is called when the class is instantiated:

  \begin{block}{}
    \begin{alltt}
      class Bird:

      ~~~~ def \_\_init\_\_(self, given\_name):

      ~~~~ ~~~~ self.name = given\_name

      \end{alltt}
  \end{block}

  \begin{block}{}
    \begin{alltt}
    >>> robin = Bird(``European robin'')

    >>> robin.name

    European robin
    \end{alltt}
  \end{block}



\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Loops and tests}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}

  \frametitle{Tests}

  \begin{block}{Tests and conditions}
    \begin{alltt}
      if 1 == 2 :               \# note the ':' !

      ~~~~    print("Wow, Problem!") \# <- 4 spaces or 1 tab


      if myGlass.isFull():   \# note ':'

      ~~~~    myGlass.doEmpty()

      elif myGlass.isEmpty():

      ~~~~    myGlass.doFill()

      else:

      ~~~~    pass                  \# "empty" action

    \end{alltt}
  \end{block}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Loops (1)}

  \begin{block}{Simple loops}
    \begin{alltt}
      for i in range( 5 ):\\
      ~~~~     print(i)
    \end{alltt}
    Will display:
    \begin{alltt}
      0\\
      1\\
      2\\
      3\\
      4\\
    \end{alltt}
  \end{block}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Loops (2)}

  \begin{block}{Loops on lists}
    %Pour boucler sur les ?l?ments d'une liste, 2 solutions:
    To loop over the items in a list, 2 possibilities:
    \begin{alltt}
      L = [ 1 , 2 , "abc" ]

      for i in range( len(L) ):\\
      ~~~~    print(L[i])
    \end{alltt}
    which is equivalent to:
    \begin{alltt}
      for x in L:\\
      ~~~~    print(x)
    \end{alltt}
  \end{block}

\begin{alertblock}{Python style}
  The second construct is more python-ish that the first, and should be preferred.
\end{alertblock}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Loops (3)}

  \begin{block}{``while'' loops}
    Infinite ``while'' loop:
    \begin{alltt}
      a = 0\\
      while True:\\
      ~~~~    a += 1\\
      ~~~~    if a == 10:\\
      ~~~~ ~~~~        break
    \end{alltt}
    ``while'' loop with a test:
    \begin{alltt}
      while a < 10:\\
      ~~~~    a+=1
    \end{alltt}
  \end{block}
\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Packages}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Packages}

  A Python package is a module that brings new functions and classes when \emph{imported}.

  The Python ecosystem offers thousands of packages.

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Importing packages}
  \begin{block}{}
    \begin{alltt}
      $>>>$ import numpy\\
      $>>>$ numpy.cos(0)\\
      1.0
    \end{alltt}
  \end{block}

  You can also use a short name for the package:

  \begin{block}{}
    \begin{alltt}
      $>>>$ import numpy as \alert{np}\\
      $>>>$ \alert{np}.cos(0)\\
      1.0
    \end{alltt}
  \end{block}

  For the lazy ones (bad practice, just for quick tests!):

  \begin{block}{}
    \begin{alltt}
      $>>>$ from numpy import *\\
      $>>>$ cos(0)\\
      1.0
    \end{alltt}
  \end{block}

\end{frame}

%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \subsection{Files and paths}
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \begin{frame}
%%   \frametitle{Files}

%%   \begin{block}{Reading and writing (text mode)}
%%     To read the content of a text file:
%%     \begin{alltt}
%%       $>>>$ f = open( "hop.txt" , "r" )\\
%%       $>>>$ for l in f.readlines():\\
%%       ~~~~    print(l)
%%     \end{alltt}
%%     To write:
%%     \begin{alltt}
%%       $>>>$ f2 = open( "hop2.txt" , "w" )  \# "a" for "append"\\
%%       $>>>$ f2.write( "Hello, world!" + str( 3.14 ) + "\textbackslash n" )\\
%%       $>>>$ f2.close()                     \# optional
%%     \end{alltt}

%%   \end{block}
%% \end{frame}

%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \begin{frame}
%%   \frametitle{Paths}

%%   \begin{block}{Manipulating paths}
%%     In the \textbf{os} package:
%%     \begin{alltt}
%%       $>>>$ import os\\
%%       $>>>$ os.getcwd() \# current directory\\
%%       `/home/name'\\
%%       $>>>$ os.path.join( os.getcwd() , "hop" , "hip" )\\
%%       `/home/name/hop/hip'
%%     \end{alltt}
%%   \end{block}

%% \end{frame}

%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \begin{frame}
%%   \frametitle{Paths (2)}

%%   \begin{block}{Packages import paths}
%%     In the file \texttt{/home/name/Python/myOwnProgram.py}
%%     \begin{alltt}
%%       def hello():\
%%       ~~~~    return "bonjour"
%%     \end{alltt}

%%     In the main program, using the \textbf{sys} package:
%%     \begin{alltt}
%%       $>>>$ import sys\\
%%       $>>>$ sys.path.append("/home/name/Python")\\
%%       $>>>$ import myOwnProgram\\
%%       $>>>$ print(myOwnProgram.hello())\\
%%       `bonjour'
%%     \end{alltt}
%%   \end{block}

%% \end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Numpy}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Numpy}

\begin{itemize}
\item A python module for scientific computing
\item Based on a powerful multi-dimensional array object
\item Efficient core coded in C++
\end{itemize}

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Numpy Arrays}

  Vectors, matrices and tensors can be represented with numpy arrays.

  \begin{block}{}
  \begin{alltt}
    $>>>$ import numpy as np

    $>>>$ a = np.array([2, 0, 3])

    $>>>$ print(a)

    [2 0 3]

    $>>>$ type(a)

    <class 'numpy.ndarray'>

    $>>>$ a.dtype  \# data type

    dtype('int64')

    $>>>$ a.ndim  \# number of dimensions

    1

    $>>>$ a.shape

    (3, )


  \end{alltt}
  \end{block}

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{2D arrays}

\begin{block}{}
  \begin{alltt}
    $>>>$ b = np.array([[2, 0, 4], [1, 3, 3]])

    $>>>$ b

  array([[2, 0, 4],
    [1, 3, 3]])

  $>>>$ b.ndim

  2

  $>>>$ b.shape

  (2, 3)

  $>>>$ b[1, 0]

  1


  \end{alltt}
\end{block}


\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Vector and matrix operations}

By default, standard operators like *, -, + , / , are applied element-wise to arrays and vectors.

  \begin{block}{}
    \begin{alltt}
      >>> a = np.array([3, 0, 2])

      >>> b = np.array([1, 2, 3], [0, 1, 0])

      >>> a*b

  array([[3, 0, 6],
       [0, 0, 0]])

  >>> b*b

  array([[1, 4, 9],
         [0, 1, 0]])

  >>> b* b.transpose()

  Traceback (most recent call last):

  File "<stdin>", line 1, in <module>

  ValueError: operands could not be broadcast together with shapes (2,3) (3,2)
  \end{alltt}
\end{block}

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Matrix and vector operations}

    \begin{block}{}
    \begin{alltt}
      >>> a = np.array([3, 0, 2])

      >>> b = np.array([1, 2, 3], [0, 1, 0])

      >>> np.matmul(b,a)

      array([9, 0])

      >>> np.matmul(b,b.transpose())

      array([[14,  2],
             [ 2,  1]])

  \end{alltt}
\end{block}

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Choosing elements within an array}

  \begin{block}{}
    \begin{alltt}
      >>> b = np.array([1, 2, 3], [0, 1, 0])

      >>> b[1,1]

      1

      >>> b[1,:]

      array([0, 1, 0])

      >>> b[:,1]

      array([2, 1])

      >>> b[:,0:2]

      array([[1, 2],
        [0, 1]]

    \end{alltt}
  \end{block}


\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Jupyter notebook}







%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Conclusion}


\begin{frame}
  \frametitle{The end}

  \vspace{3ex}

  \centering
  \Large Good Luck !

\end{frame}
\end{document}
